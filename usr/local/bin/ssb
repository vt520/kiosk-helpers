#!/bin/bash
source /usr/local/lib/kiosk/user

SSB_NAME=$(basename $0)
SSB_URL="$KIOSK_SSB_URLS/${SSB_NAME}"
SSB_CACHE="$KIOSK_PROFILE/.chrome/$SSB_NAME"
mkdir -p "${SSB_CACHE}" 2> /dev/null

[ "$SSB_NAME" == "ssb" ] && {
	echo Please call this from a symlink generated by do-update-ssb
	exit
}

[ -e $SSB_URL ] || {
	echo SSB Not Configured Correctly run do-update-ssb and check your configuration
	exit
}

chromium \
    --user-data-dir=$SSB_CACHE \
    --app=$(<$SSB_URL) \
	--block-new-web-contents \
	--class=SSB.$SSB_NAME/window
